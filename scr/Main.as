package  {	//Flash imports	import flash.display.MovieClip;	import flash.events.Event;	import flash.display.Stage;		//Screens	import screen.Level1;	import screen.Level2;	import screen.Level3;	import screen.TitleScreen;	import screen.decisionScreen;	import screen.introAnimation;		public class Main extends MovieClip {				//Screens		private var _titleScreen:TitleScreen;		private var _decisionScreen:decisionScreen;		private var _introScreen:introAnimation;				//Levels		private var _level1:Level1;		private var _level2:Level2;		private var _level3:Level3;				//Vars		private static var _currentLevel:Number;		private static var _playerHealth:Number;		private static var _score:Number;		private static var _lvlRunning:Boolean;				private static var _instance:Main = null;				public function Main() {			preloader.addEventListener(Event.COMPLETE, onPreloaderComplete);		}				//When Preloader is finished loading		private function onPreloaderComplete(event:Event):void {			soundInit();			init();		}				//Initializes Sounds		private function soundInit():void{			trace("Sound Initialized");		}				//Initializes the game and variables		private function init():void {			//Vars			_instance = this			_playerHealth = 0;			_score = 0;			_currentLevel = 0;						//Event Listeners			stage.addEventListener("titleRemoved", onTitleComplete);			stage.addEventListener("bulletCreated", onBulletCreation);			stage.addEventListener("enemyCreated", onEnemyCreated);			stage.addEventListener("levelComplete", onLevelComplete);			stage.addEventListener("continuePressed", onContinue);			stage.addEventListener("escapePressed", onEscape);			stage.addEventListener("introComplete", onIntroComplete);						//Calls title screen			addTitle();			trace("Game Initialized");		}				//Calls title		private function addTitle():void {			_titleScreen = new TitleScreen();		}				//Listens for title complete		private function onTitleComplete(event:Event):void {			_introScreen = new introAnimation();		}				//Listens for intro complete		private function onIntroComplete(event:Event):void{			_level1 = new Level1();		}				//When level ends		private function onLevelComplete(event:Event):void {			_decisionScreen = new decisionScreen;		}				//If continue decided		private function onContinue(event:Event):void{			if(_currentLevel == 1 && _lvlRunning == false){				_level2 = new Level2();			}			if(_currentLevel == 2 && _lvlRunning == false){				_level1 = new Level1();			}			if(_currentLevel == 3 && _lvlRunning == false){				_level1 = new Level1();			}		}				//On escape		private function onEscape(event:Event):void{			if(_currentLevel == 1 && _lvlRunning == false){				_level3 = new Level3();			}			if(_currentLevel == 2 && _lvlRunning == false){				addTitle();			}			if(_currentLevel == 3 && _lvlRunning == false){				addTitle();			}		}				//Sends bullets to levels		private function onBulletCreation(event:Event):void{			if(_currentLevel == 1){				_level1.getInstance().addBullet(MovieClip(event.target).getInstance());			}			if(_currentLevel == 2){				Level2.addBullet(MovieClip(event.target).getInstance());			}			if(_currentLevel == 3){				Level3.addBullet(MovieClip(event.target).getInstance());			}		}		//Sends enemies to levels		private function onEnemyCreated(event:Event):void{			if(_currentLevel == 1){				_level1.getInstance().addEnemy(MovieClip(event.target).getInstance());			}			if(_currentLevel == 2){				Level2.addEnemy(MovieClip(event.target).getInstance());			}			if(_currentLevel == 3){				Level3.addEnemy(MovieClip(event.target).getInstance());			}		}				//Getting a refference to Main		public static function getInstance():Main {			return _instance;		}				//Getting a refference to Stage		public static function getStage():Stage {			return getInstance().stage;		}				//Get Player health		public static function getPlayerHealth():Number {			return _playerHealth;		}				//Get current score		public static function getScore():Number{			return _score;		}				//Set health;		public static function setPlayerHealth(healthChange:Number):void{			_playerHealth += healthChange;		}				//Set score;		public static function setScore(scoreChange:Number):void {			_score += scoreChange;		}				//Set Level;		public static function setLevel(levelNumber:Number):void{			_currentLevel = levelNumber;		}				//Set Level running		public static function lvlRunning(isRunning:Boolean):void{			_lvlRunning = isRunning;		}	}	}